function loadScript(t, e) { var a = document.createElement("script"); a.type = "text/javascript", a.onload = e, a.src = t, document.head.appendChild(a) } function loadLandingPagesConfig(t, e) { var a = new XMLHttpRequest; a.onreadystatechange = function () { 4 == a.readyState && 200 == a.status && e(JSON.parse(a.responseText)) }, a.open("GET", t, !0), a.send() } loadScript("https://cdn.kyteapp.com/$web/kyte-analytics-short-unique-id.js", (function () { const t = { utm_campaign: window.location.pathname, referrer: document.referrer }, e = ["aid", "kid", "pkid", "cid", "email", "fbclid", "gclid"]; function a(t, e) { try { const a = new URL(t); return Object.keys(e).forEach((t => a.searchParams.set(t, e[t]))), a.searchParams.set("cacheBust", Date.now()), a.toString() } catch (e) { return console.error("Error in addParams:", e), t } } function o(e, a) { const o = function (e) { const a = "https://kyteapp.page.link/", o = t.utm_source || "", n = t.utm_medium || ""; let c = t.utm_campaign || ""; c = c.replace(/\//g, "_"); const i = new URLSearchParams({ utm_source: o, utm_medium: n, utm_campaign: c }).toString(); let r, s = `https://web.kyteapp.com/login?${encodeURIComponent(i)}`; return r = e.classList.contains("catalog-redir") ? `${a}?link=${s}&apn=com.kyte.catalog&ibi=com.kytecatalog&isi=6462521196&utm_source=${o}&utm_medium=${n}&utm_campaign=${c}&pt=120346822&ct=${o}_${n}_${c}&mt=8` : e.classList.contains("control-redir") ? `${a}?link=${s}&apn=com.kytecontrol&ibi=com.kytecontrol&isi=6472947922&utm_source=${o}&utm_medium=${n}&utm_campaign=${c}&pt=120346822&ct=${o}_${n}_${c}&mt=8` : `${a}?link=${s}&apn=com.kyte&ibi=com.kytepos&isi=1345983058&utm_source=${o}&utm_medium=${n}&utm_campaign=${c}&pt=120346822&ct=${o}_${n}_${c}&mt=8`, r }(a), n = e.querySelector('input[name="_redir"]'); n && (n.value = o) } "function" == typeof ShortUniqueId ? (document.addEventListener("click", (function (t) { const e = t.target; if (e.matches(".catalog-redir, .control-redir")) { t.preventDefault(); const a = e.closest("form"); a && (o(a, e), a.submit()) } })), function (a = {}, o = function () { }) { try { if (Object.keys(a).forEach((e => { t[e] = a[e], localStorage.setItem(e, a[e]) })), e.forEach((e => { if (!t[e]) { const a = localStorage.getItem(e); a && (t[e] = a) } })), document.cookie.split(";").forEach((a => { const [o, n] = a.trim().split("="), c = "_ga" === o ? "cid" : o; e.includes(c) && !t[c] && n && (t[c] = n) })), e.every((e => !t[e]))) { const e = new ShortUniqueId({ length: 15 }); t.pkid = e.rnd() + Date.now(), localStorage.setItem("pkid", t.pkid) } const n = localStorage.getItem("aidMatchDate"); if (n && (t.aidMatchDate = n), Object.keys(t).forEach((e => { localStorage.setItem(`k_${e}`, t[e]) })), "object" == typeof dataLayer && dataLayer.push({ event: "AttributionDataUpdated" }), n && t.kid) return void o(t.kid); const c = new XMLHttpRequest; c.open("post", "https://kyte-api-gateway.azure-api.net/get-kyte-id"), c.setRequestHeader("Content-Type", "application/json;charset=UTF-8"), c.onreadystatechange = function () { if (c.readyState === XMLHttpRequest.DONE && c.responseText) { const e = JSON.parse(c.responseText), a = e.kid; localStorage.getItem("kid") !== a && (t.kid = a, localStorage.setItem("kid", a), "object" == typeof dataLayer && dataLayer.push({ event: "KidIdentify", kid: a })), e.aidMatchDate && localStorage.setItem("aidMatchDate", e.aidMatchDate), o(a) } }, c.send(JSON.stringify(t)) } catch (t) { console.error("Error in getKid:", t) } }({ url: window.location.href }, (function () { const e = document.querySelectorAll("input"); for (const a of e) { const e = a.getAttribute("name"); e && t[e] && (a.value = t[e]) } const o = document.getElementsByTagName("a"); for (const e of o) -1 === e.href.indexOf(window.location.href) && (e.href = a(e.href, t)) })), loadLandingPagesConfig("/path/to/landingPages.json", (function (t) { const e = window.location.pathname, a = document.querySelectorAll('input[type="submit"], button[type="submit"]'); t[e] && a.forEach((a => { a.classList.add(t[e]) })) }))) : console.error("ShortUniqueId module failed to load") }));