function loadScript(e, t) { var n = document.createElement("script"); n.type = "text/javascript", n.onload = t, n.src = e, document.head.appendChild(n) } function loadLandingPagesConfig(e) { return fetch(e).then((e => { if (!e.ok) throw new Error("Network response was not ok"); return e.json() })).catch((e => console.error("There has been a problem with your fetch operation:", e))) } let landingPagesConfig; function applyRedirectClasses() { const e = window.location.pathname, t = document.querySelectorAll('input[type="submit"], button[type="submit"]'), n = landingPagesConfig[e]; n && n.redirectClass && t.forEach((e => { e.classList.add(n.redirectClass) })) } function handleRedirection(e) { const t = window.location.pathname, n = landingPagesConfig[t]; if (!n) return; const o = { utm_campaign: window.location.pathname, referrer: document.referrer, utm_source: document.referrer ? new URL(document.referrer).hostname : "", utm_medium: "web" }; let i = o.utm_campaign.replace(/\//g, "_"); let c = constructDynamicLink(n, "https://kyteapp.page.link/", `https://web.kyteapp.com/login?${`utm_source=${o.utm_source}&utm_medium=${o.utm_medium}&utm_campaign=${i}`}`, e.classList, o); if (c) { const t = e.closest("form"); if (t) { t.querySelector('input[name="_redir"]').value = c, t.submit() } } } function isMobileDevice() { const e = navigator.userAgent; return /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e) || e.includes("Macintosh") && "ontouchend" in document } function isIOSDevice() { const e = navigator.userAgent; return /iPad|iPhone|iPod/.test(e) || e.includes("Macintosh") && "ontouchend" in document } function isDesktop() { return !isMobileDevice() } function constructDynamicLink(e, t, n, o, i) { let c = `${t}?link=${encodeURIComponent(n)}`; const r = isIOSDevice(), a = isDesktop(); return o.contains("cpp-redir") ? a ? "https://web.kyteapp.com/login" : r ? e.ios : e.android : (c += `&apn=${o.contains("catalog-redir") ? "com.kyte.catalog" : o.contains("control-redir") ? "com.kytecontrol" : "com.kyte"}&ibi=${o.contains("catalog-redir") ? "com.kytecatalog" : o.contains("control-redir") ? "com.kytecontrol" : "com.kytepos"}&isi=${o.contains("catalog-redir") ? "6462521196" : o.contains("control-redir") ? "6472947922" : "1345983058"}`, c += `&utm_source=${i.utm_source}&utm_medium=${i.utm_medium}&utm_campaign=${i.utm_campaign.replace(/\//g, "_")}&pt=120346822&ct=${o.contains("catalog-redir") ? "catalog" : o.contains("control-redir") ? "control" : "default"}_${i.utm_campaign.replace(/\//g, "_")}&mt=8`, c) } document.addEventListener("DOMContentLoaded", (function () { loadLandingPagesConfig("https://growthatkyte.github.io/web/scripts/landing-pages-list.json").then((e => { landingPagesConfig = e, applyRedirectClasses() })) })), document.addEventListener("click", (function (e) { const t = e.target; t.matches(".catalog-redir, .control-redir, .cpp-redir") && (e.preventDefault(), handleRedirection(t)) }));