function loadScript(t, e) { var n = document.createElement("script"); n.type = "text/javascript", n.onload = e, n.src = t, document.head.appendChild(n) } function loadLandingPagesConfig(t) { return fetch(t).then((t => { if (!t.ok) throw new Error("Network response was not ok"); return t.json() })).catch((t => console.error("There has been a problem with your fetch operation:", t))) } let landingPagesConfig; function applyRedirectClasses() { const t = window.location.pathname, e = document.querySelectorAll('input[type="submit"], button[type="submit"]'), n = landingPagesConfig[t]; n && n.redirectClass && e.forEach((t => { t.classList.add(n.redirectClass) })) } function handleRedirection(t) { const e = window.location.pathname, n = landingPagesConfig[e]; if (!n) return; const o = { utm_campaign: window.location.pathname, referrer: document.referrer, utm_source: document.referrer ? new URL(document.referrer).hostname : "", utm_medium: "web" }; let a = o.utm_campaign.replace(/\//g, "_"); let r = constructDynamicLink(n, "https://kyteapp.page.link/", `https://web.kyteapp.com/login?${`utm_source=${o.utm_source}&utm_medium=${o.utm_medium}&utm_campaign=${a}`}`, t.classList, o); if (r) { const e = t.closest("form"); if (e) { e.querySelector('input[name="_redir"]').value = r, e.submit() } } } function constructDynamicLink(t, e, n, o, a) { let r = `${e}?link=${encodeURIComponent(n)}`; const i = navigator.userAgent || window.opera, c = /iPad|iPhone|iPod/.test(i) && !window.MSStream; return o.contains("cpp-redir") ? c ? t.ios : t.android : (r += `&apn=${o.contains("catalog-redir") ? "com.kyte.catalog" : o.contains("control-redir") ? "com.kytecontrol" : "com.kyte"}&ibi=${o.contains("catalog-redir") ? "com.kytecatalog" : o.contains("control-redir") ? "com.kytecontrol" : "com.kytepos"}&isi=${o.contains("catalog-redir") ? "6462521196" : o.contains("control-redir") ? "6472947922" : "1345983058"}`, r += `&utm_source=${a.utm_source}&utm_medium=${a.utm_medium}&utm_campaign=${a.utm_campaign.replace(/\//g, "_")}&pt=120346822&ct=${o.contains("catalog-redir") ? "catalog" : o.contains("control-redir") ? "control" : "default"}_${a.utm_campaign.replace(/\//g, "_")}&mt=8`, r) } document.addEventListener("DOMContentLoaded", (function () { loadLandingPagesConfig("https://growthatkyte.github.io/web/scripts/landing-pages-list.json").then((t => { landingPagesConfig = t, applyRedirectClasses() })) })), document.addEventListener("click", (function (t) { const e = t.target; e.matches(".catalog-redir, .control-redir, .cpp-redir") && (t.preventDefault(), handleRedirection(e)) }));