async function fetchConfigAndInit() { try { const t = "https://growthatkyte.github.io/web/scripts/landing-pages-list.json", e = await fetch(t); if (!e.ok) throw new Error("Failed to load landing pages configuration"); const n = await e.json(); document.addEventListener("DOMContentLoaded", (() => { applyRedirectClasses(n), loadScript("https://cdn.kyteapp.com/$web/kyte-analytics-short-unique-id.js", (() => console.log("Tracking initialized"))) })), document.addEventListener("click", (t => handleRedirection(t, n))) } catch (t) { console.error("Error initializing landing pages:", t) } } function loadScript(t, e) { var n = document.createElement("script"); n.type = "text/javascript", n.onload = e, n.src = t, document.head.appendChild(n) } function applyRedirectClasses(t) { const e = window.location.pathname, n = document.querySelectorAll('input[type="submit"], button[type="submit"]'), i = e.endsWith("/") ? e : `${e}/`, a = t[e] || t[i.slice(0, -1)]; a && a.redirectClass && n.forEach((t => { t.classList.add(a.redirectClass) })) } function handleRedirection(t, e) { const n = t.target; if (n.matches(".catalog-redir, .control-redir, .cpp-redir")) { t.preventDefault(); const i = window.location.pathname, a = e[i] || e[i.endsWith("/") ? i.slice(0, -1) : i + "/"]; if (!a) return; constructAndRedirect(a, extractAndStoreUTMParams(), n.classList.contains("cpp-redir")) } } function extractAndStoreUTMParams() { let t = { utm_source: document.referrer ? new URL(document.referrer).hostname : "direct", utm_medium: "web", utm_campaign: window.location.pathname.replace(/^\//, "").replace(/\/$/, "").replace(/\//g, "_"), utm_content: "", utm_term: "" }; const e = new URLSearchParams(window.location.search); return ["utm_source", "utm_medium", "utm_campaign", "utm_term", "utm_content"].forEach((n => { e.has(n) && (t[n] = e.get(n)) })), Object.keys(t).forEach((e => localStorage.setItem(e, t[e]))), t } function isMobileDevice() { return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) } function isIOSDevice() { return /iPad|iPhone|iPod/.test(navigator.userAgent) || "MacIntel" === navigator.platform && navigator.maxTouchPoints > 1 } function constructAndRedirect(t, e, n) { const i = `utm_source=${e.utm_source}&utm_medium=${e.utm_medium}&utm_campaign=${e.utm_campaign}`, a = encodeURIComponent(i); let o; if (n) { if (isMobileDevice()) return void (window.location.href = isIOSDevice() ? t.ios : t.android); o = `https://web.kyteapp.com/login?${i}` } else { let n, i, c, r; switch (t.redirectClass) { case "control-redir": n = "com.kytecontrol", i = "com.kytecontrol", c = "6472947922", r = `control_${e.utm_campaign}`; break; case "catalog-redir": n = "com.kyte.catalog", i = "com.kytecatalog", c = "6462521196", r = `catalog_${e.utm_campaign}`; break; default: n = "com.kyte", i = "com.kytepos", c = "1345983058", r = `default_${e.utm_campaign}` }o = `https://kyteapp.page.link/?link=${a}&apn=${n}&ibi=${i}&isi=${c}&utm_source=${e.utm_source}&utm_medium=${e.utm_medium}&utm_campaign=${e.utm_campaign}&pt=120346822&ct=${r}&mt=8` } window.location.href = o } fetchConfigAndInit();