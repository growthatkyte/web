async function initializeLandingPageRedirection() { try { const t = "https://growthatkyte.github.io/web/scripts/landing-pages-list.json", n = await fetch(t); if (!n.ok) throw new Error("Failed to fetch landing pages configuration"); const i = await n.json(); document.addEventListener("DOMContentLoaded", (() => { applyClasses(i), loadScript("https://cdn.kyteapp.com/$web/kyte-analytics-short-unique-id.js", (() => console.log("Analytics initialized"))) })), document.addEventListener("click", (t => { const n = t.target.closest('input[type="submit"], button[type="submit"]'); (n && n.classList.contains("catalog-redir") || n.classList.contains("cpp-redir") || n.classList.contains("control-redir")) && (t.preventDefault(), handleRedirection(n, i)) })) } catch (t) { console.error("Initialization failed:", t) } } function applyClasses(t) { const n = window.location.pathname.endsWith("/") ? window.location.pathname : `${window.location.pathname}/`, i = document.querySelectorAll('input[type="submit"], button[type="submit"]'); Object.keys(t).forEach((e => { if ((e.endsWith("/") ? e : `${e}/`) === n) { const n = t[e].redirectClass; i.forEach((t => t.classList.add(n))) } })) } function handleRedirection(t, n) { const i = n[window.location.pathname.endsWith("/") ? window.location.pathname : `${window.location.pathname}/`]; if (!i) return void console.error("Configuration missing for this page"); redirectUser(i, getUTMParams(), t.classList.contains("cpp-redir")) } function getUTMParams() { const t = new URLSearchParams(location.search), n = {}; return ["utm_source", "utm_medium", "utm_campaign", "utm_content", "utm_term"].forEach((i => { n[i] = t.get(i) || "" })), n } function redirectUser(t, n, i) { const e = i ? handleCPPRedirection(t, isMobileDevice()) : createDynamicLink(t.redirectClass, n); window.location.href = e } function createDynamicLink(t, n) { const i = new URLSearchParams(n).toString(); return `https://kyteapp.page.link/?${`link=${encodeURIComponent(`https://web.kyteapp.com/login?${i}`)}&apn=${t}&ibi=${t}&isi=123456789&ct=${t}_${n.utm_campaign}`}` } function handleCPPRedirection(t, n) { if (!n) { return `https://web.kyteapp.com/login?${new URLSearchParams(getUTMParams()).toString()}` } return isIOSDevice() ? t.ios : t.android } function isMobileDevice() { return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) } function isIOSDevice() { return /iPad|iPhone|iPod/.test(navigator.userAgent) || "MacIntel" === navigator.platform && navigator.maxTouchPoints > 1 } function loadScript(t, n) { const i = document.createElement("script"); i.src = t, i.onload = n, document.head.appendChild(i) } initializeLandingPageRedirection();