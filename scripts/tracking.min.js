async function initializeLandingPageRedirection() { try { const t = "https://growthatkyte.github.io/web/scripts/landing-pages-list.json", e = await fetch(t); if (!e.ok) throw new Error("Failed to fetch landing pages configuration"); const i = await e.json(); document.addEventListener("DOMContentLoaded", (function () { applyClasses(i), loadScript("https://cdn.kyteapp.com/$web/kyte-analytics-short-unique-id.js", (() => console.log("Analytics initialized"))) })), document.addEventListener("click", (t => { t.target.closest('input[type="submit"], button[type="submit"]') && (t.preventDefault(), handleRedirection(t.target, i)) })) } catch (t) { console.error("Initialization failed:", t) } } function applyClasses(t) { const e = window.location.pathname.endsWith("/") ? window.location.pathname : `${window.location.pathname}/`, i = document.querySelectorAll('input[type="submit"], button[type="submit"]'); Object.keys(t).forEach((n => { if ((n.endsWith("/") ? n : `${n}/`) === e) { const o = t[n].redirectClass; i.forEach((t => t.classList.add(o))), console.log(`Redirect class '${o}' applied to buttons on ${e}`) } })) } function handleRedirection(t, e) { const i = window.location.pathname, n = e[i] || e[`${i}/`]; if (!n) return console.error("Configuration missing for this page"); redirectUser(n, getUTMParams(), t.classList.contains("cpp-redir")) } function getUTMParams() { const t = new URLSearchParams(location.search); return ["utm_source", "utm_medium", "utm_campaign", "utm_content", "utm_term"].reduce(((e, i) => (e[i] = t.get(i) || "", e)), {}) } function redirectUser(t, e, i) { if (isMobileDevice()) if (i) { const e = isIOSDevice() ? t.ios : t.android; window.location.href = e } else { const i = new URLSearchParams(e).toString(), n = createDynamicLink(t.redirectClass, i); window.location.href = n } else { const t = `https://web.kyteapp.com/login?${new URLSearchParams(e).toString()}`; window.location.href = t } } function createDynamicLink(t, e) { const i = `https://web.kyteapp.com/login?${e}`, n = "control-redir" === t ? "com.kytecontrol" : "catalog-redir" === t ? "com.kyte.catalog" : "com.kyte", o = "control-redir" === t ? "com.kytecontrol" : "catalog-redir" === t ? "com.kytecatalog" : "com.kytepos", a = "control-redir" === t ? "6472947922" : "catalog-redir" === t ? "6462521196" : "1345983058", c = `${t}_${utmParams.utm_campaign}`; return `https://kyteapp.page.link/?link=${encodeURIComponent(i)}&apn=${n}&ibi=${o}&isi=${a}&utm_source=${utmParams.utm_source}&utm_medium=${utmParams.utm_medium}&utm_campaign=${utmParams.utm_campaign}&pt=120346822&ct=${c}&mt=8` } function isMobileDevice() { return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) } function isIOSDevice() { return /iPad|iPhone|iPod/.test(navigator.userAgent) || "MacIntel" === navigator.platform && navigator.maxTouchPoints > 1 } function loadScript(t, e) { const i = document.createElement("script"); i.src = t, i.onload = e, document.head.appendChild(i) } initializeLandingPageRedirection();